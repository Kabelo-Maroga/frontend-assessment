<div class="customer-list-container">
  <h2>Customer Management</h2>

  <div class="toolbar" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
    <mat-form-field appearance="fill" style="margin-right: 1rem;">
      <mat-label>Search by First Name</mat-label>
      <input matInput #searchInput (input)="onSearch(searchInput.value)" placeholder="Type to filter..." />
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="openAddCustomerDialog()">
      Add Customer
    </button>
  </div>


  <div class="customer-list-layout" style="display: flex;">
    <div style="flex: 2; margin-right: 1rem;">
      <!-- Your existing table -->
      <table mat-table [dataSource]="(filteredCustomers$ | async) || []" class="mat-elevation-z8" multiTemplateDataRows>
        <!-- First Name Column -->
        <ng-container matColumnDef="firstName">
          <th mat-header-cell *matHeaderCellDef style="width: 22%;"> First Name </th>
          <td mat-cell *matCellDef="let customer" style="width: 22%;"> {{ customer.firstName }} </td>
        </ng-container>

        <!-- Last Name Column -->
        <ng-container matColumnDef="lastName">
          <th mat-header-cell *matHeaderCellDef style="width: 22%;"> Last Name </th>
          <td mat-cell *matCellDef="let customer" style="width: 22%;"> {{ customer.lastName }} </td>
        </ng-container>

        <!-- Addresses Column -->
        <ng-container matColumnDef="addresses">
          <th mat-header-cell *matHeaderCellDef style="width: 22%;"> Addresses </th>
          <td mat-cell *matCellDef="let customer" style="width: 22%;">
            <ul>
              <li *ngFor="let address of customer.addresses" style="margin: 0; padding: 1.2rem;">
                {{ address.city }}, {{ address.postalCode }}
              </li>
            </ul>
          </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef style="width: 22%;"> Actions </th>
          <td mat-cell *matCellDef="let customer" style="width: 22%;">
            <button mat-icon-button color="accent" (click)="deleteCustomer(customer); $event.stopPropagation()">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <!-- Header Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <!-- Clickable Data Row -->
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          (click)="onRowClick(row)"
          class="clickable-row"
        ></tr>
      </table>

    </div>

    <div style="flex: 1;" class="mat-elevation-z8" *ngIf="selectedCustomer">
      <app-customer-details [customer]="selectedCustomer"></app-customer-details>
    </div>
  </div>
</div>
